---
import { getCollection } from "astro:content";
const top5 = await getCollection("top5");

const movies = top5
  .filter((item) => item.data.category === "movies")
  .map((item) => item.data.items)[0];

const tvShows = top5
  .filter((item) => item.data.category === "tv-shows")
  .map((item) => item.data.items)[0];

const books = top5
  .filter((item) => item.data.category === "books")
  .map((item) => item.data.items)[0];
---

<div class="collapse-arrow border-base-300 collapse border bg-gray-100">
  <input type="checkbox" name="top5" />

  <div class="collapse-title">
    <h2 class="text-xl font-semibold">All-Time Top 5</h2>
  </div>

  <div class="collapse-content flex flex-col gap-2">
    <div class="collapse-arrow border-base-300 collapse border bg-gray-100">
      <input type="checkbox" name="movies" />

      <div class="collapse-title">
        <h2 class="text-lg font-semibold">Movies</h2>
      </div>

      <div class="collapse-content flex flex-col gap-8">
        <div class="flex flex-col items-start justify-start">
          {
            movies.map((movie, idx) => (
              <div class="flex w-full flex-row items-start justify-start gap-3">
                <p class="w-3">{idx + 1}.</p>
                <p>{movie}</p>
              </div>
            ))
          }
        </div>
      </div>
    </div>

    <div class="collapse-arrow border-base-300 collapse border bg-gray-100">
      <input type="checkbox" name="tv" />

      <div class="collapse-title">
        <h2 class="text-lg font-semibold">TV Shows</h2>
      </div>

      <div class="collapse-content flex flex-col gap-8">
        <div class="flex flex-col items-start justify-start">
          {
            tvShows.map((show, idx) => (
              <div class="flex w-full flex-row items-start justify-start gap-3">
                <p class="w-3">{idx + 1}.</p>
                <p>{show}</p>
              </div>
            ))
          }
        </div>
      </div>
    </div>

    <div class="collapse-arrow border-base-300 collapse border bg-gray-100">
      <input type="checkbox" name="books" />

      <div class="collapse-title">
        <h2 class="text-lg font-semibold">Books</h2>
      </div>

      <div class="collapse-content flex flex-col gap-8">
        <div class="flex flex-col items-start justify-start">
          {
            books.map((book, idx) => (
              <div class="flex w-full flex-row items-start justify-start gap-3">
                <p class="w-3">{idx + 1}.</p>
                <p>{book}</p>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</div>
