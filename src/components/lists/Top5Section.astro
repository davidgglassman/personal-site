---
import { getCollection } from "astro:content";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ListAccordion } from "@/components/lists/ListAccordion";

const top5 = await getCollection("top5");

const movies = top5
  .filter((item) => item.data.category === "movies")
  .map((item) => item.data.items)[0];

const tvShows = top5
  .filter((item) => item.data.category === "tv-shows")
  .map((item) => item.data.items)[0];

const books = top5
  .filter((item) => item.data.category === "books")
  .map((item) => item.data.items)[0];
---

<div class="flex-col-standard gap-2">
  <h3>All-Time Top 5</h3>

  <Card className="w-full">
    <CardContent className="-mt-4 -mb-5">
      <ListAccordion
        client:load
        data={[
          { title: "Movies", list: movies },
          { title: "TV Shows", list: tvShows },
          { title: "Books", list: books },
        ]}
      />
    </CardContent>
  </Card>
</div>
